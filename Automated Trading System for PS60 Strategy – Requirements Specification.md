# Automated Trading System for PS60 Strategy – Requirements Specification

## Overview

The **PS60 strategy** (short for *Pivot Support 60-minute* process) is a trading approach developed by Dan Shapiro that emphasizes stocks moving from one supply zone to the next demand zone (and vice versa) based on multi-timeframe analysis[\[1\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=people%20who%20join%20feel%20free,service%20of%20buy%20when%20the)[\[2\]](https://www.tradingview.com/script/zQRYBKPZ-Yanni-s-PS60-Strategy/#:~:text=My%20take%20on%20PS60%20by,clear%20by%20having%20some%20transparency). It relies on key levels derived from 60-minute candle charts, with moving averages and Bollinger Bands acting as dynamic support (demand) and resistance (supply) levels[\[2\]](https://www.tradingview.com/script/zQRYBKPZ-Yanni-s-PS60-Strategy/#:~:text=My%20take%20on%20PS60%20by,clear%20by%20having%20some%20transparency). The system will automate this strategy, comprising two main modules (Backtesting and Live Trading), and implement robust risk management and profit-taking algorithms aligned with PS60 principles. All outputs will be in data logs and summary reports (no graphical charts), enabling strategy evaluation and refinement.

## Backtest Module Requirements

This module allows simulating the PS60 strategy on historical data to evaluate performance and fine-tune parameters. Key requirements include:

* **Historical Data Retrieval**: Connect to the IBKR API to download historical minute-by-minute OHLCV data. The system shall support up to **6 months of 1-minute bar data** per symbol for the backtest period. Data requests should be throttled as per IBKR limits and stored locally for reuse.

* **Daily Watchlist Integration**: Incorporate **scanner outputs** (e.g. daily JSON/CSV files of candidates) as the watchlist for each simulated day. Each trading day in the backtest will load its list of symbols and their context (support/resistance levels, volatility, etc.) from the scanner’s output. Only symbols flagged by the scanner (the “daily watchlist”) are considered for trades that day, ensuring the backtest focuses on the same opportunities a trader would have identified.

* **PS60 Setup Identification**: Simulate trades based on PS60-defined setups, using the historical minute data:

* **Breakout Entries**: Detect when price **breaks above a key resistance pivot** (e.g. prior day high or a scanner-provided resistance level) during market hours. Upon a breakout, confirm the move with additional criteria (such as a strong momentum candle and volume surge[\[3\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,breaking%20out)[\[4\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=1,surge%20we%20want%20to%20see)) before entering a long trade. The breakout level and time are logged as the trade entry trigger.

* **Bounce Plays**: Identify when a stock **pulls back to a known support** (e.g. a 60-min moving average or daily support level) and then **bounces upward**. The system should simulate a long entry once a bounce is confirmed by a reversal pattern (for example, a bullish engulfing off the support or a hammer candle) and improved buying volume. The support level (demand zone) acts as the pivot for the bounce setup.

* **Rejection/Fade Setups**: Identify instances where price hits a defined resistance (supply zone) but **fails to break out**, instead reversing direction. If a stock in the watchlist attempts a breakout but shows a **rejection** (e.g. a false breakout with long upper wick or an immediate push back below the level), simulate a short trade (fade) at the point of rejection. Confirmation might include a bearish reversal candle or rapid volume selling at the supply. (Short trades can be toggled on/off via configuration in case only long trades are desired.) Each rejection trade’s trigger level and time are recorded.

* **Trade Confirmation Logic**: Implement logic to **validate a signal before entry** to reduce false trades. For example, upon a breakout level being touched, require one or more of: (a) **sustained trade above the level for N minutes**, (b) a significant **volume spike confirming the breakout**[\[3\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,breaking%20out), and/or (c) a large **momentum candle** that is substantially bigger than recent candles[\[5\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,symmetrical%20triangle). This confirmation filter helps avoid entering on brief fake-outs. Similarly, for bounce plays, require the price to decisively move off the support with a strong bullish candle, and for rejection plays, require a clear bearish turn at the pivot. The confirmation criteria (time window, volume threshold, etc.) shall be configurable parameters.

* **Order Execution Simulation**: The backtester will simulate realistic order fills for entries and exits:

* Entry price is assumed at the first minute bar **after** confirmation of the setup (or the breakout level price, plus a small slippage). A **slippage** factor can be configured (e.g. enter at 0.1% worse than the signal price to mimic real market delay). If the price gaps beyond the level, the simulator can either skip the trade or enter at the gapped price, based on a user setting.

* Fill logic should consider that not all signals fill perfectly: e.g., if a breakout touches the level very briefly and reverses, the system may consider that a missed trade (no fill) unless configured otherwise.

* **Partial fills** are not explicitly simulated (assume full fill if conditions meet), but the model should account for trade size relative to historical volume to avoid unrealistic fills (for example, don’t assume a 10,000-share fill on a stock that traded only 5,000 shares in that minute).

* **Stop-Loss Placement**: Immediately upon entering a simulated trade, place a **stop-loss** at a logical level defined by PS60 theory and sound risk management. For long breakouts, the stop is typically just below the breakout pivot or below the nearest significant support that would invalidate the trade. For example, if a stock breaks out above \\$50 (pivot), the stop could be set just below \\$50 or below the last consolidation low. Similarly for a bounce entry, set the stop just below the support level that price bounced from. These levels correspond to where the trade thesis fails[\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven)[\[7\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Your%20stop%20should%20be%20placed,breakout%20thesis%20is%20clearly%20invalidated). The system will use the scanner’s output if available (e.g. a provided support or downside1 price) as an initial stop guideline. All stop-loss levels are recorded, and if historical price hits the stop, the trade is marked as stopped out at that price (with slippage applied if configured).

* **Profit-Taking Rules**: The backtest module will support multiple **profit-taking algorithms** to determine how trades are closed for gains, inspired by PS60 practices and industry best-practices:

* **Fixed Target Profits**: Use predefined profit target levels (for instance, the scanner’s target1, target2, target3 prices or next known resistance level) to exit trades. The user can specify one or multiple target points. When a target is reached in the historical data, the trade (or part of it) is exited at that price.

* **Trailing Stop**: Implement a trailing stop mechanism that moves the stop-loss up (for longs) as the price advances. The trail can be a fixed percentage or ATR-based. For example, a 2% trailing stop would adjust the stop price upward as new highs are made, locking in profit. In the backtest, as each minute bar completes, the simulator will move the stop accordingly and check if it would be hit.

* **Hybrid (Partial \+ Trail)**: Simulate **partial profit-taking** combined with trailing stop, as often advocated in PS60. For instance, **sell half the position at the first significant target or a 1:1 risk-reward point**, then **move the stop-loss to breakeven** on the remaining position and let it run[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this)[\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven). The remaining portion would either hit a higher second target or be stopped out at the adjusted stop (worst case, breakeven). This approach allows locking in some profit and letting a “runner” portion ride the trend[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this). The system should allow configuration of the partial sizes (e.g. 50% at first target, 25% at second, etc.) and the points (1:1 R/R, specific price level, etc.) at which to take profits.

* The module will record each profit-taking action: which portion of the trade exited at what price and time, and what strategy triggered it (target hit, trailing stop hit, etc.).

* **Risk Management & Position Sizing**: Each simulated trade must adhere to risk management rules. The user can set a **maximum risk per trade** (e.g. 1% of account equity by default, per PS60 guidance[\[9\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=The%20question%20is%2C%20what%E2%80%99s%20a,that%C2%A0maximum%20potential%20loss%20of%201)[\[10\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Position%20Sizing)). The backtester will calculate position size for each trade such that if the stop-loss is hit, the loss is approximately this percentage of the account. For example, with a \\$100,000 account and 1% risk (\\$1,000), if the distance from entry to stop is $2 per share, the simulator would allocate \~500 shares (since \\$2 \* 500 \= \\$1,000 at risk)[\[9\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=The%20question%20is%2C%20what%E2%80%99s%20a,that%C2%A0maximum%20potential%20loss%20of%201). This account-based sizing ensures realistic scaling of trade sizes over the 6-month test. If a trade setup would require buying more shares than a configured maximum position size or available capital, the trade is scaled down or skipped. The module should also enforce a **max concurrent trades** limit if specified (e.g. no more than 5 open positions at once) to reflect portfolio constraints.

* **Simulation of Slippage & Commissions**: To make backtest results more realistic, the module will simulate:

* **Slippage**: Small random or rule-based slippage on each entry/exit. For instance, on volatile stocks or during fast moves, assume an unfavorable fill 0.1%–0.5% away from the ideal price. This can be modeled as an average slippage per trade or based on volatility (ATR) of the stock.

* **Commission Costs**: Deduct trading commissions and fees from P/L. The system will allow configuring a commission rate (for example, \\$0.005 per share, IBKR’s default, or a fixed per-trade fee). These costs accumulate in the performance metrics to give a net profit picture.

* **Logging & Output**: The backtest module will produce structured logs and summary reports for analysis:

* **Trade Logs**: A detailed log entry for every simulated trade, including date, symbol, setup type (breakout/bounce/rejection), entry time & price, position size, stop-loss, profit targets, exit times & prices (with reasons: stopped, target hit, etc.), and per-trade P\&L. This can be output as a CSV or JSON lines for further analysis.

* **Daily Journal**: For each trading day simulated, compile a summary that includes the list of trades taken (or “No trades” if none met criteria), the broad market context (e.g. S\&P 500 up/down that day, any major news if provided), and any notable observations (e.g. “Many breakouts failed due to midday low volume”). This serves as a journal-style record. The system can auto-generate basic context (like index performance, volatility) if historical index data is available, or leave placeholders for user notes.

* **Performance Summary**: After the full backtest period, produce aggregate performance metrics: total gross and net profit, win rate, average win vs loss, maximum drawdown, Sharpe or Sortino ratio if relevant, etc. Include breakdowns by setup type (e.g. breakout trades had 60% win rate, bounce trades 50%, etc.) and by profit-taking strategy if multiple were tested. This helps in evaluating which strategies were most effective over the 6 months. All results should be easy to interpret from the logs or presented in a summary table format.

* **Backtest Configuration**: Provide a configuration file or interface where the user can adjust parameters for the backtest without changing code. This includes: date range of historical data, list of symbols or scanner file paths, strategy parameters (risk %, profit-taking mode, confirmation settings, etc.), and output file locations. By tweaking these, the user can run various scenarios (e.g. testing different stop-loss tightness or profit-taking methods) and compare results.

## Live Trading Module Requirements

This module will run the strategy in real-time, executing paper trades during market hours using IBKR’s Trader Workstation (TWS) API. It should closely mirror the backtested logic, with additional considerations for live data and fault tolerance:

* **Operational Hours**: The live trading system shall operate **during market hours (9:30 AM to 3:30 PM EST)** by default. These hours should be configurable (to allow, for example, extending to 4 PM or starting late). Outside of trading hours, the system should either remain idle or shut down safely. Before market open, it can perform initialization tasks (like loading watchlist, establishing data feed connections, etc.), and after market close, it can finalize logs and shut down or enter a waiting state until the next session.

* **Real-Time Data Feed**: Use IBKR’s API to subscribe to real-time market data (tick-by-tick or consolidated quotes) for all symbols in the current watchlist. The system must handle IB’s streaming data constraints (possibly using snapshot requests if tick streaming is limited). **Tick data** (or at least second-by-second quotes) is needed to promptly detect when price reaches the critical levels (breakouts, etc.). The module will maintain an in-memory view of the market for each symbol (current price, high/low of day, recent volume, etc.) and can also aggregate data into 1-min bars as needed for strategy logic (replicating the 60-min pivot tracking, etc.).

* **Dynamic Watchlist Updates**: The module should support updating its watchlist based on **live scanner results** or scheduled scans:

* At startup (pre-market), load the **daily watchlist** (e.g. from the previous day’s scanner output or a morning scan) which includes the symbols likely to set up PS60 patterns. Subscribe to data for these symbols.

* Optionally, at configured intervals (e.g. 10:00 AM, 11:30 AM EST), trigger an update: this could involve re-running the scanner or reading an updated scanner output file to catch any new symbols showing PS60 setups intraday. For example, if a stock not in the morning list suddenly has a high-volume move and meets criteria, the scanner might output it at 11 AM; the system should detect this and add the symbol to the watchlist (and subscribe to its data feed) for the rest of day trading. The times for such intraday scans are configurable (“scan times”).

* Conversely, the system might remove symbols from active tracking if they are no longer viable (for instance, if a breakout already happened and trade concluded, and no further trades will be taken in that symbol that day). However, for simplicity, it can also keep all symbols active until close, unless there’s a performance need to drop them.

* **Real-Time Signal Detection**: Continuously monitor each watchlist symbol for the defined PS60 setups in real time:

* Monitor **breakout levels**: For each symbol, determine the key pivot levels of interest (e.g. prior day high or a notable 60-min resistance identified by the scanner). As live ticks stream in, if price approaches and exceeds a pivot, the system flags a potential breakout. Apply the same **confirmation logic** as in backtest: for instance, ensure the break is accompanied by **high volume or persists for a certain number of seconds** before officially triggering an entry signal[\[11\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=To%20avoid%20fakeout%20traps%3A%201,damage%20when%20fakeouts%20do%20occur). The system could utilize a short buffer or timer – e.g., if price breaks out, start a 60-second timer; if price remains above the level (and doesn’t whipsaw back) for that duration or if volume in that interval is above threshold, then confirm the breakout signal.

* Monitor **bounce/rejection setups**: If a stock is trending down to a known support (like a 20 EMA on the 60-min chart or a daily support level from the watchlist), watch for a bottoming pattern. For example, if the price touches the support and then the next few ticks show an upward reversal (and perhaps time & sales show buying interest), the system can confirm a **bounce entry**. Similarly, for rejection, if price spikes into a resistance and then quickly falls back, the system detects a **reject signal**, confirmed by, say, a break back below the pivot within a short time frame.

* Use indicator thresholds if needed: The system can optionally compute technical indicators (e.g., real-time moving averages, Bollinger Bands on the 1-min and 60-min charts) to help identify when a bounce or rejection is happening (for instance, price hitting the upper Bollinger Band might coincide with a potential rejection setup, as per PS60 theory). These indicators should update in real time and are used internally for decision logic.

* **Trade Execution (Paper Trading)**: When a trade signal is confirmed, the system will execute an **order through IBKR’s paper trading account** via API:

* **Order Types**: Use appropriate order types to simulate realistic execution. For entries, a **market order** can ensure the trade is entered (but might incur slippage), whereas a **limit order** at the trigger price could be used to attempt zero slippage entry. The choice can be configurable; however, to guarantee fills on paper, market orders at signal confirmation are a straightforward approach.

* **Position Sizing**: Calculate the order size based on the current account equity and risk settings. The same 1-2% risk per trade rule applies: determine the stop-loss price and compute shares such that (EntryPrice – StopPrice) \* Shares ≈ 1% of account (for long; for short, use Entry – Stop in absolute). Round down to a size that does not exceed available buying power. The system should also respect any IBKR margin constraints for shorts or leverage if applicable (paper trading typically allows margin, but the strategy can be run in cash mode too).

* **Bracket Orders**: Immediately after entry, submit a **bracket order** (one-cancels-other) containing the stop-loss and one or more profit-taking limit orders, if supported. For example, if the strategy uses a fixed first profit target, put a limit sell at that price, and a stop order at the stop-loss price. IBKR can hold these server-side. If partial profit-taking is used, multiple bracket legs can be placed (e.g., sell 50% at target1, and a stop for the full position; when target1 fills, it might automatically reduce the stop size or the system can adjust the stop order accordingly). If IB’s API does not support multiple bracket legs natively, the system will manage it by placing an initial bracket (stop \+ one target) and then adjusting orders when one fills (e.g., after taking first profit, modify the stop order to new quantity and price for breakeven or trail).

* **Order Feedback**: The module must handle order callbacks from the API to confirm fills. When an entry order fills, record the actual fill price (which could differ slightly from expected). When an exit order (stop or target) fills, record that and mark the trade as closed. If partial fills occur (especially with limit orders), the system should track remaining shares and continue managing the rest.

* **Live Risk Management**: Enforce risk controls throughout the trading session:

* **Stop-Loss Enforcement**: Ensure that every open position has an active stop order in the market (paper) at the designated stop price. If for any reason (e.g., API disconnect) a stop isn’t placed or gets canceled, the system must detect this and re-place the stop immediately to avoid unprotected risk. The stop prices are determined as per the strategy rules (technical invalidation point) and should not be moved to widen the risk. They may, however, be moved **in the favorable direction** as part of trailing logic (never moved to increase risk).

* **Profit-Taking Execution**: Implement the **hybrid profit-taking logic** if enabled: e.g., once a trade is profitable by an amount equal to the initial risk (1R), the system can automatically sell a portion (like half) of the position. This can be achieved either by having preset limit orders (as mentioned in bracket) or by the system monitoring price and sending a market/limit order when conditions meet. After partial profit, the system will **adjust the stop-loss of the remaining position to breakeven** (entry price) or a small profit, effectively securing that the worst-case on the remainder is no loss[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this). Additionally, for the remaining shares, the module can initiate a **trailing stop**: for instance, trail by 0.5% below the highest price achieved since entry. This trailing stop moves up in real time as new highs are made. If the trailing stop is hit, it will exit the rest of the position. These mechanisms reflect contemporary best practices of letting winners run while minimizing risk[\[12\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Partial%20Profit)[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this).

* **Daily Loss Limits**: (Configurable) If the strategy accumulates losses beyond a certain threshold in a day (e.g., 3% of account or a fixed dollar amount), the system should stop initiating new trades for the remainder of the day and possibly cancel any pending orders. This prevents a runaway loss day. The threshold can be set by the user as part of risk management. Similarly, a daily profit cap can be set if desired (though not common, but some traders may stop after a certain profit).

* **Monitoring and Alerts**: The live module should continuously monitor that the account equity and margin are within safe bounds. If any anomaly is detected (like an order that didn’t execute, or a position without a stop), it should alert (via log or even email/SMS if configured) the user immediately and take corrective action (like flattening the position if something is very wrong).

* **Fault Tolerance & Recovery**: The system needs to be robust to connectivity issues or crashes, given the long trading session:

* **Connection Loss Handling**: Implement automatic reconnection logic to IBKR TWS. If the API connection drops (which can happen if TWS restarts or network blips), the module should detect it (via error codes or heartbeat misses) and attempt to reconnect after a short delay. Upon reconnect, it must **resync state**: e.g., query current open orders and open positions from the paper account to know where it left off. It should then re-subscribe to market data for the watchlist symbols. During the disconnection window, IB’s server might have continued to execute stops or targets; on reconnection, the system should reconcile any trades that closed in its absence.

* **Mid-Day Restart**: If the application is restarted or crashes and is relaunched mid-session, it should **load its last known state** from a persistent store. For instance, the system can maintain a small state file or database (updated in real-time) that records all open positions, entry prices, stop/target prices, and any recent signals. On startup, the module reads this and also cross-checks with the IBKR account (to handle any divergence). It must then resume managing those open trades (adjust stops, etc.) as if it was never interrupted. New signals should be processed normally after restart, but **duplicate entries must be avoided** – e.g., if a breakout already happened and the position is open, it shouldn’t enter again even if the price is still around the pivot. Mark that pivot as already traded.

* **Safe Mode on Reboot**: In case of a full system reboot (e.g., power failure, then machine comes back up), the application should be configured to start in a **safe state**. Possibly it should not auto-trade until a human verifies things, or it starts but only manages existing positions without adding new ones until given the go-ahead. This is a design decision: by default, it could come up, reconnect, flatten any positions (to be ultra-safe), or continue as normal if it trusts the state record. The specification is to ensure no unintended trades occur due to a reboot. The system will log a warning that a reboot recovery happened, listing any actions taken (like “Recovered 2 open positions from prior session and resumed management” or “No open positions on reboot, system ready.”).

* **Logging & Notifications**: The live trading module will produce real-time logs and end-of-day reports:

* **Real-Time Log**: A console or file log that records significant events as they happen: e.g., “10:15:05 \- Triggered breakout long entry on AAPL at 175.50, Volume spike confirmed” or “10:45:00 \- Partial profit taken on GOOGL at 1R (sold 50 shares at \\$125.00)” and “Stopped out remaining 50 shares at breakeven \\$123.00”. These logs should have timestamps to aid debugging and review.

* **Daily Summary Report**: After market close, generate a summary of the day’s trading similar to the backtest daily journal: which trades were executed (including entry/exit prices and P\&L per trade), total P\&L for the day, and any notes on performance or anomalies. For example, note if any trade deviated from plan or if any errors occurred.

* **Error Alerts**: If any critical errors occur (connection loss, order rejection, etc.), the system should log them and optionally send an alert (email or other) if configured. This ensures the user can intervene if needed.

* **Paper Account Sync**: Log the starting and ending account balance in the paper account each day to track equity curve. This helps verify that the system’s internal P\&L calculation matches the paper account’s actual results.

* **Live Module Configuration**: Provide a configuration similar to backtest for live run: connection settings for IBKR (TWS host, port, client id, etc.), list or source of symbols (the daily scanner file path or scanner service API), risk parameters, profit-taking mode toggle (e.g., choose between fixed-target or hybrid), and runtime options (like whether to actually place orders or run in a “dry-run” simulation mode for testing). This ensures flexibility and safe testing before live deployment.

## Risk Management and Profit-Taking Strategy (PS60 Approach)

*To ground the trading rules in sound practice, the system’s algorithms for stop losses and profit taking are informed by both PS60 theory and broader trading research.* Key principles and algorithms include:

* **Risk Per Trade – 1% Rule**: The system will by default use the **1% risk rule**, meaning no single trade will risk more than \~1% of the account’s capital[\[9\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=The%20question%20is%2C%20what%E2%80%99s%20a,that%C2%A0maximum%20potential%20loss%20of%201)[\[10\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Position%20Sizing). This aligns with Dan Shapiro’s guidance to preserve “mental capital” and industry best practices for risk management. The user can adjust this to 2% or another value, but keeping risk low ensures that even a series of losses will not significantly draw down the account[\[13\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=The%20key%20to%20long,This%20means)[\[10\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Position%20Sizing). Position sizing is computed from this rule as described earlier, and it works hand-in-hand with stop placement.

* **Stop-Loss Placement**: All stop-losses are set at **logical technical levels**, not arbitrary percentages[\[7\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Your%20stop%20should%20be%20placed,breakout%20thesis%20is%20clearly%20invalidated). A “logical level” is one that, if breached, clearly invalidates the trade setup. For PS60 breakouts, that could be just below the breakout pivot or below the last base in which the stock consolidated (if the price falls back there, the breakout failed). For a bounce trade, the logical stop is slightly below the support level that was supposed to hold. This ensures the stop is tight enough to cut a failing trade, but not so tight that normal noise stops out good trades. Empirical studies and trader experience show that using chart-based stop levels is more effective than fixed-dollar stops[\[14\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,expectancy%20across%20your%20trading%20system)[\[15\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=your%20stop,reward%2C%20then%20moving). The system will implement a check that the chosen stop level results in a risk that is not more than the configured percent – if the distance is too large (e.g., support is far below entry), the trade might be skipped or reduced, as it would violate the 1% rule.

* **Risk-Reward and Trade Selection**: The strategy will **only take trades that offer a favorable risk-to-reward ratio**, typically at least **2:1** or higher in potential[\[16\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Always%20aim%20for%20a%20minimum,least%20twice%20your%20potential%20loss)[\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven). That means the anticipated profit (to the first target or expected move) is at least twice the amount risked (distance from entry to stop). This criterion is a part of trade evaluation – for instance, the scanner’s output provides a calculated risk/reward for each setup; the system can use a threshold (like skip trades with R/R \< 2). Maintaining a 2:1 or better ratio is crucial for profitability even if win rate is modest[\[17\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=With%20a%202%3A1%20reward,can%20still%20be%20profitable%20overall). The system will log the estimated R/R for each trade it takes (e.g., “Entering with R/R \~3.0 based on target1”).

* **Volume and Confirmation for Entries**: A common reason for failed breakouts (fake-outs) is lack of volume or conviction. The system’s confirmation logic includes requiring **volume surges and strong price action** before committing capital. Historical studies suggest that real breakouts are accompanied by significantly higher volume[\[3\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,breaking%20out), whereas fakeouts often have lukewarm volume[\[18\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=1,surge%20we%20want%20to%20see). Therefore, the algorithm will compare current volume to average volume (or use the scanner’s relative volume metrics) – e.g., require that the volume in the breakout minute is in the top X% of the day’s volume distribution. Additionally, the presence of a **momentum candle** (a large range candle breaking the level) is a positive signal[\[19\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,symmetrical%20triangle). These factors improve the probability that the breakout will follow through. These confirmation conditions can be fine-tuned and are supported by contemporary trading literature that emphasizes waiting for **confirmation signals** to avoid false entries[\[11\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=To%20avoid%20fakeout%20traps%3A%201,damage%20when%20fakeouts%20do%20occur).

* **Partial Profit-Taking (Hybrid Strategy)**: The system’s default profit-taking mode will use a **hybrid approach**: take partial profits at a reasonable point and let the rest run with a trailing stop. This approach is supported by both the PS60 methodology and modern trading practices: it locks in some profits early, which **reduces emotional pressure** and secures a win on the trade, while still giving opportunity for larger gains on the remainder[\[20\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Partial%20Profit)[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this). Concretely, the system might take ½ of the position off once **price has moved in favor by the amount risked (1R)**[\[20\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Partial%20Profit). This ensures at least a 1:1 reward on that portion. Right after taking this profit, the stop on the remaining position is moved to the **breakeven point (entry price)**[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this)[\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven). This means the worst-case outcome on the remainder is no loss, thereby eliminating risk from the trade. From there, the remaining portion can either hit further **profit targets** (perhaps predefined or dynamically decided based on next resistance levels), or trail until stopped. This algorithm of “scale-out and raise stop” has been found effective in trend-following and breakout strategies as it balances risk and reward[\[12\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Partial%20Profit)[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this). The user can configure the percentages (e.g., take 1/3 off at first target instead of 1/2, etc.) but the concept remains to always secure some profit and protect the remainder.

* **Trailing Stop Mechanism**: For the portion of a trade left to run, the system will employ a **trailing stop** to progressively lock in profits as the price continues favorably. A typical trailing stop might be set a certain percentage below the highest price achieved (for longs) or above the lowest price (for shorts) – for example, 1% trail. Alternatively, it could be based on volatility (like 2 \* ATR(14) behind the price). The trailing stop will only move in one direction (up for longs, down for shorts) – never widening. By doing so, if the stock runs far, the stop will protect a large portion of those gains, and if the stock reverses, it will exit automatically when the preset give-back limit is hit. **Contemporary practice** often pairs trailing stops with partial profit-taking: data shows this can improve overall returns by capturing occasional big wins while still ensuring baseline profitability on most trades[\[21\]\[22\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,taking). Our system will allow trailing stop parameters to be tuned (percentage or ATR multiplier) to fit the volatility of the instrument (e.g., a tighter trail for slow stocks, looser for volatile ones).

* **Adaptive Profit Targets**: Instead of fixed dollar targets, the system can use adaptive targets derived from the context – for example, the **next supply level** on a higher timeframe chart. PS60 theory states stocks move from supply to supply (resistance to next resistance)[\[23\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=with%20a%20logical%20stop%20at,That%E2%80%99s%20a%20great%20opportunity), so an intelligent way to set a profit target is to look at the next known resistance above the breakout point (for a long trade). The scanner provides target1/2/3 which likely correspond to such levels (perhaps 5-day high, 20-day high, etc.). The system will utilize those as guidance: e.g., target1 might be used for the first partial take-profit, target2 for the second partial, etc. Similarly, for shorts, the next demand (support) levels would act as downside targets. Using these structure-based targets is aligned with how a human trader would plan exits (sell before a stock hits a major resistance where it might stall). This **target-based exit strategy** can be used in lieu of or in addition to trailing stops, depending on configuration. Historical studies on support/resistance suggest that taking profits just before a stock hits the next significant level can maximize the chance of fill and avoid losing unrealized gains to a reversal at that level.

* **Emotional Capital and Trade Management**: The system’s design (from risk limits to partial exits) implicitly acknowledges the psychological aspect of trading – though it’s automated, these rules mirror best practices that human traders use to stay disciplined[\[24\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=Ultimately%2C%20when%20you%20have%20a,for%20something%20good%20to%20happen)[\[13\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=The%20key%20to%20long,This%20means). By cutting losses quickly (strict stop enforcement) and letting winners run (trailing stops) while paying oneself along the way (partial profits), the strategy aims to maintain a positive expectancy without large swings. This also means the system won’t revenge-trade or deviate from the plan – it will follow the coded rules consistently, which is a key advantage of automation.

Overall, these risk management and profit-taking measures ensure that the PS60 strategy is executed in a controlled, statistically sound manner. The combination of tight **risk control** (1% stops, logical levels[\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven)) and **optimized profit capture** (targets and trailing[\[21\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,taking)[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this)) is expected to yield a favorable reward-to-risk profile while avoiding catastrophic losses. All such parameters are documented and can be tweaked as needed, but the defaults are chosen based on widely accepted trading principles and specific PS60 theory insights.

## General System Requirements

These requirements apply to the system as a whole, covering configuration, performance, and reporting aspects not tied to a single module:

* **Configurability**: All key strategy parameters shall be easily configurable without code changes. This includes, but is not limited to: risk per trade percentage, maximum number of trades per day, profit-taking mode (choose between fixed targets, trailing stop, hybrid), sizes for partial exits, confirmation time window, volume thresholds for confirmation, and scheduled scan update times. Configuration can be via a JSON/YAML file or a simple UI/console prompts. For example, a user can set \\"max\_daily\_loss\\": 0.02 to stop trading after 2% account loss, or \\"scan\_update\_times\\": \[1100, 1400\] to load new scanner data at 11:00 and 2:00 PM. The system will read these at startup and apply throughout.

* **No GUI Charting**: The system is intended to run as a backend service or console application. **No chart visualization** is required or will be produced. This avoids the overhead of graphics and focuses on execution and data logging. Instead of showing charts, the system outputs textual and numeric information (logs, summaries). If analysis is needed, the user can import the log data into external tools or charting software. The lack of GUI also makes the system easier to run on a server for automated trading.

* **Performance and Reliability**: The system must be capable of handling the targeted number of symbols and data feed without lag. For backtesting, this means efficiently looping through 6 months of minute data for perhaps dozens of symbols (using vectorized operations or database queries where possible). For live trading, it means handling tick data and order responses in real-time for maybe 10-20 symbols (the typical size of a daily watchlist) without missing beats. Multi-threading can be employed: e.g., one thread for data capture, one for signal processing, one for order management, to ensure responsiveness. The code should be robust against common errors (network issues, data format changes, etc.) – using try-catch and fallback procedures to keep running. Logging every critical action also helps in debugging if something goes wrong.

* **Data Storage**: Maintain an organized storage of data and results. Historical data retrieved for backtest can be cached on disk (to avoid repeated API calls). Trade logs and daily journals should be stored in a directory structure by date. Perhaps a database (SQLite or CSV files) is used to store all trade records for easy querying (so the user can query “show all breakout trades on tech stocks” later, for example). All sensitive information (like API keys if any, account credentials) should be stored securely (not in plain text). Since IBKR uses TWS, likely a username/password login is done outside the system, so this might not apply except for any cloud deployment.

* **Testing and Simulation Modes**: Include a **dry-run mode** for the live module where it does everything except actually place real orders. This would use the live data feed but just log the hypothetical trades it *would* take. This is crucial for testing the system in real-time without financial risk, and for debugging logic with live market conditions. Similarly, allow backtesting on subsets of data or on specific scenarios to facilitate strategy testing (for example, replay a single day’s data tick-by-tick to observe the strategy’s behavior, useful for development debugging).

* **Safety Checks**: Implement sanity checks such as: do not send duplicate orders (if somehow the same signal triggers twice, ensure only one order is executed), and avoid conflicting positions (e.g., if already long 100 shares of XYZ, don’t initiate a new trade in opposite direction on the same symbol unless explicitly allowed for strategy). If the strategy is long-only (user configurable), the system should ignore any short signals. The system should also verify that the account has enough buying power before sending an order (in paper this might not be an issue, but it’s good practice).

* **Daily Restart and Shutdown**: The software should gracefully handle day boundaries. The live trading module should ideally start fresh each trading day (to clear any residual state). It can be scheduled to start before the open and automatically shut down after the close (once all trades are closed or carried over). If trades *are* carried overnight (not typical for an intraday PS60 approach, but if user allows it), the system should either manage them (with next day stops, etc.) or warn the user. By default, assume all trading is intraday (flat by close). The system will cancel any open orders at the end of day and close positions if instructed to do so.

* **User Documentation**: Provide clear documentation for the user on how to operate the system – including how to configure it, how to start/stop backtests and live trading, and how to interpret the output logs and summary tables. Although not a code requirement, this is part of delivering a usable system. The documentation should also describe the PS60 strategy assumptions so the user understands why the system behaves as it does (for instance, explaining that the system won’t trade if a stock opens above the pivot because PS60 deems that pivot invalid in that case[\[25\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=,Hence%20the%20PS60%2C%20we)).

* **Compliance and Paper Trading Constraints**: Since the system trades on a paper account, there are fewer compliance issues; however, if adapted to real trading later, it should be designed with compliance in mind (e.g., no wash trades, proper order labeling). It should also respect IBKR API limits (like pacing of requests, max tickers). The system should monitor for any IBKR messages about pacing violations or data farm connection issues and handle them (e.g., slow down requests or reconnect to a different server).

In summary, this specification outlines an automated trading system that rigorously follows the PS60 process in both backtesting and live environments. It emphasizes **robust risk management**, uses **data-driven trade confirmation**, and provides rich **logging and transparency** for the user. By integrating historical insights (like risk-reward ratios and volume confirmation for breakouts[\[3\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,breaking%20out)[\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven)) with practical engineering (like fault tolerance and configurability), the system aims to deliver a reliable tool for strategy development and day-to-day trading of the PS60 strategy. All requirements above are designed to ensure the system is **comprehensive, flexible, and safe**, giving users confidence in automating the PS60 trading approach.

**Sources:**

1. Dan Shapiro, *Risk Allocation and Preserving Your Mental Equity* – Guidance on 1% risk per trade and position sizing[\[9\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=The%20question%20is%2C%20what%E2%80%99s%20a,that%C2%A0maximum%20potential%20loss%20of%201)[\[26\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=In%20the%20video%2C%20I%20use,That%E2%80%99s%20a%20great%20opportunity).

2. *Mind Math Money – Breakout Trading Strategies (2025)* – Best practices on volume confirmation, stop placement, risk/reward, and partial profit-taking for breakout trades[\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven)[\[27\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,breaking%20out).

3. Albert Chen, *PS60 Theory detailed breakdown* – Explanation of PS60 intraday pivot methodology, including taking gains in partial increments and moving stops to breakeven[\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this)[\[1\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=people%20who%20join%20feel%20free,service%20of%20buy%20when%20the).

4. Yanni Nicolaides, *PS60 Strategy Indicator notes* – Description of PS60 reliance on moving average and Bollinger Band levels as supply and demand zones[\[2\]](https://www.tradingview.com/script/zQRYBKPZ-Yanni-s-PS60-Strategy/#:~:text=My%20take%20on%20PS60%20by,clear%20by%20having%20some%20transparency).

5. Additional trading resources on risk management (Investopedia, etc.) corroborating the use of 1-2% risk limits and 2:1 reward-to-risk as a standard for sound trading practices[\[10\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Position%20Sizing)[\[16\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Always%20aim%20for%20a%20minimum,least%20twice%20your%20potential%20loss). (These principles are reflected in the system’s design.)

---

[\[1\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=people%20who%20join%20feel%20free,service%20of%20buy%20when%20the) [\[8\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=to%20be%20in%20a%20wining,The%20entire%20purpose%20of%20this) [\[25\]](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory#:~:text=,Hence%20the%20PS60%2C%20we) Most detail breakdown \#ps60 theory – @danshep55 on Tumblr

[https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory](https://www.tumblr.com/danshep55/152171461670/most-detail-breakdown-ps60-theory)

[\[2\]](https://www.tradingview.com/script/zQRYBKPZ-Yanni-s-PS60-Strategy/#:~:text=My%20take%20on%20PS60%20by,clear%20by%20having%20some%20transparency) Yanni's PS60 Strategy — Indicator by Yanni\_Nicolaides — TradingView

[https://www.tradingview.com/script/zQRYBKPZ-Yanni-s-PS60-Strategy/](https://www.tradingview.com/script/zQRYBKPZ-Yanni-s-PS60-Strategy/)

[\[3\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,breaking%20out) [\[4\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=1,surge%20we%20want%20to%20see) [\[5\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,symmetrical%20triangle) [\[6\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=For%20breakout%20trades%2C%20limit%20risk,loss%20to%20breakeven) [\[7\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Your%20stop%20should%20be%20placed,breakout%20thesis%20is%20clearly%20invalidated) [\[10\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Position%20Sizing) [\[11\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=To%20avoid%20fakeout%20traps%3A%201,damage%20when%20fakeouts%20do%20occur) [\[12\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Partial%20Profit) [\[13\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=The%20key%20to%20long,This%20means) [\[14\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,expectancy%20across%20your%20trading%20system) [\[15\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=your%20stop,reward%2C%20then%20moving) [\[16\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Always%20aim%20for%20a%20minimum,least%20twice%20your%20potential%20loss) [\[17\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=With%20a%202%3A1%20reward,can%20still%20be%20profitable%20overall) [\[18\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=1,surge%20we%20want%20to%20see) [\[19\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,symmetrical%20triangle) [\[20\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=Partial%20Profit) [\[21\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,taking) [\[22\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,taking) [\[27\]](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025#:~:text=,breaking%20out) Breakout Trading Strategy: Identify High-Probability Setups in Any Market — Mind Math Money

[https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025](https://www.mindmathmoney.com/articles/breakout-trading-strategies-that-actually-work-in-2025)

[\[9\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=The%20question%20is%2C%20what%E2%80%99s%20a,that%C2%A0maximum%20potential%20loss%20of%201) [\[23\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=with%20a%20logical%20stop%20at,That%E2%80%99s%20a%20great%20opportunity) [\[24\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=Ultimately%2C%20when%20you%20have%20a,for%20something%20good%20to%20happen) [\[26\]](https://accessatrader.com/risk-allocation-preserving-mental-equity/#:~:text=In%20the%20video%2C%20I%20use,That%E2%80%99s%20a%20great%20opportunity) Risk Allocation and Preserving Your Mental Equity \- Access A Trader

[https://accessatrader.com/risk-allocation-preserving-mental-equity/](https://accessatrader.com/risk-allocation-preserving-mental-equity/)