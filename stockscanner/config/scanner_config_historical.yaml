# PS60 Pre-Market Scanner Configuration - Historical Mode
# Adjusted for historical data where we don't have actual pre-market volume

scan_config:
  # Scanner mode
  mode: historical  # 'historical' or 'live'

  # Stock Universe
  universe:
    indexes:
      - NASDAQ100
      - SP500
    custom_symbols: []
    max_symbols: 100
    min_price: 5
    min_volume: 200000

  # IBKR Connection Settings
  ibkr:
    host: '127.0.0.1'
    port: 7497  # 7497 for paper, 7496 for live
    client_id: 1
    market_data_type: 1  # 1=Live, 2=Frozen, 3=Delayed, 4=Delayed-Frozen
    timeout: 30
    max_concurrent_requests: 50
    request_delay: 0.1  # seconds between requests

  # PS60 Filter Criteria - Adjusted for Historical
  filters:
    gap_threshold: 1.5  # Lowered from 2.0 for historical
    rvol_threshold: 0.5  # Lowered significantly for historical (using estimated pre-market)
    room_to_run_pct: 1.0
    consolidation_days: 5
    enable_pattern_detection: true
    news_weight: 1.5

    # Historical-specific settings
    historical_volume_factor: 0.3  # Estimate pre-market as 30% of day volume
    use_daily_rvol_fallback: true  # Use daily RVOL if pre-market estimate too low
    daily_rvol_threshold: 1.5  # Daily volume must be 1.5x average

  # Scoring Weights
  scoring:
    gap_weight: 40  # Increased for historical
    volume_weight: 20  # Decreased for historical
    pattern_weight: 20
    room_weight: 20

  # Risk Management
  risk:
    max_position_size_pct: 5
    max_loss_per_trade_pct: 2
    min_risk_reward_ratio: 1.0
    time_stop_minutes: 7
    pivot_chase_limit: 0.16

  # Output Settings
  output:
    directory: ./output
    formats:
      - csv
      - json
      - markdown
    max_candidates: 20

  # Logging
  logging:
    level: INFO
    log_file: ./logs/scanner_historical.log
    max_file_size: 10MB
    backup_count: 5

  # Scanner Schedule (for live mode)
  schedule:
    enabled: false  # Disabled for historical
    times:
      - "08:00"  # 8:00 AM ET
      - "08:30"  # 8:30 AM ET
      - "09:00"  # 9:00 AM ET
    timezone: "US/Eastern"